package com.github.andresvasquez.event_repository.repository

import com.github.andresvasquez.event_repository.data.source.remote.model.EventDetails
import com.github.andresvasquez.event_repository.data.toEventDto
import com.google.gson.Gson
import org.hamcrest.CoreMatchers
import org.hamcrest.CoreMatchers.`is`
import org.hamcrest.CoreMatchers.instanceOf
import org.hamcrest.MatcherAssert.assertThat
import org.junit.Assert.fail
import org.junit.Test
import java.lang.NullPointerException
import java.util.*

class MappingTest {
    @Test
    fun shouldMapAsValidDTO() {
        //Given a an object from server
        val mockJson =
            "{\"name\":\"STOMP (NY)\",\"type\":\"event\",\"id\":\"G5dZZplPkgwos\",\"test\":false,\"url\":\"https://www.ticketmaster.com/stomp-ny-new-york-new-york-09-24-2021/event/30005AB946D72471\",\"locale\":\"en-us\",\"images\":[{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_16_9.jpg\",\"width\":1024,\"height\":576,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_LARGE_16_9.jpg\",\"width\":2048,\"height\":1152,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_LANDSCAPE_16_9.jpg\",\"width\":1136,\"height\":639,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_ARTIST_PAGE_3_2.jpg\",\"width\":305,\"height\":203,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_3_2.jpg\",\"width\":1024,\"height\":683,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_EVENT_DETAIL_PAGE_16_9.jpg\",\"width\":205,\"height\":115,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RECOMENDATION_16_9.jpg\",\"width\":100,\"height\":56,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_PORTRAIT_16_9.jpg\",\"width\":640,\"height\":360,\"fallback\":false},{\"ratio\":\"4_3\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_CUSTOM.jpg\",\"width\":305,\"height\":225,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_PORTRAIT_3_2.jpg\",\"width\":640,\"height\":427,\"fallback\":false}],\"sales\":{\"public\":{\"startDateTime\":\"2021-06-28T16:00:00Z\",\"startTBD\":false,\"startTBA\":false,\"endDateTime\":\"2021-09-24T23:00:00Z\"}},\"dates\":{\"start\":{\"localDate\":\"2021-09-24\",\"localTime\":\"20:00:00\",\"dateTime\":\"2021-09-25T00:00:00Z\",\"dateTBD\":false,\"dateTBA\":false,\"timeTBA\":false,\"noSpecificTime\":false},\"timezone\":\"America/New_York\",\"status\":{\"code\":\"onsale\"},\"spanMultipleDays\":false},\"classifications\":[{\"primary\":true,\"segment\":{\"id\":\"KZFzniwnSyZfZ7v7na\",\"name\":\"Arts & Theatre\"},\"genre\":{\"id\":\"KnvZfZ7v7l1\",\"name\":\"Theatre\"},\"subGenre\":{\"id\":\"KZazBEonSMnZfZ7v7ll\",\"name\":\"Miscellaneous\"},\"type\":{\"id\":\"KZAyXgnZfZ7v7nI\",\"name\":\"Undefined\"},\"subType\":{\"id\":\"KZFzBErXgnZfZ7v7lJ\",\"name\":\"Undefined\"},\"family\":false}],\"promoter\":{\"id\":\"494\",\"name\":\"PROMOTED BY VENUE\",\"description\":\"PROMOTED BY VENUE / NTL / USA\"},\"promoters\":[{\"id\":\"494\",\"name\":\"PROMOTED BY VENUE\",\"description\":\"PROMOTED BY VENUE / NTL / USA\"}],\"info\":\"If this performance is cancelled or if your tickets need to be cancelled to comply with updated government COVID-19 requirements, you will receive a notification of cancellation and be offered an exchange or a full refund for your purchase. The theater has established COVID-19 health & safety measures (details at: stomponline.com) including, but not limited to, proof of full vaccination (for ages 12+) and wearing masks. By virtue of entering the theater, all ticket holders agree to comply with all venue health & safety measures which are subject to change between now and the performance date. Tickets purchased for this event may be exchanged or refunded subject to the terms and conditions of the theater exchange and refund policy.\",\"pleaseNote\":\"Important Event Info If this performance is cancelled or if your tickets need to be cancelled to comply with updated government COVID-19 requirements, you will receive a notification of cancellation and be offered an exchange or a full refund for your purchase. The theater has established COVID-19 health & safety measures (details at: stomponline.com) including, but not limited to, proof of full vaccination (for ages 12+) and wearing masks. By virtue of entering the theater, all ticket holders agree to comply with all venue health & safety measures which are subject to change between now and the performance date. Tickets purchased for this event may be exchanged or refunded subject to the terms and conditions of the theater exchange and refund policy.\",\"priceRanges\":[{\"type\":\"standard\",\"currency\":\"USD\",\"min\":48,\"max\":88}],\"seatmap\":{\"staticUrl\":\"https://maps.ticketmaster.com/maps/geometry/3/event/30005AB946D72471/staticImage?type=png&systemId=HOST\"},\"accessibility\":{\"ticketLimit\":4},\"ticketLimit\":{\"info\":\"There is a nineteen (19) ticket limit per person.\"},\"ageRestrictions\":{\"legalAgeEnforced\":false},\"_links\":{\"self\":{\"href\":\"/discovery/v2/events/G5dZZplPkgwos?locale=en-us\"},\"attractions\":[{\"href\":\"/discovery/v2/attractions/K8vZ9171pQ0?locale=en-us\"}],\"venues\":[{\"href\":\"/discovery/v2/venues/KovZpZAF7etA?locale=en-us\"}]},\"_embedded\":{\"venues\":[{\"name\":\"Orpheum Theatre\",\"type\":\"venue\",\"id\":\"KovZpZAF7etA\",\"test\":false,\"url\":\"https://www.ticketmaster.com/orpheum-theatre-tickets-new-york/venue/393233\",\"locale\":\"en-us\",\"images\":[{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dbimages/15375v.jpg\",\"width\":205,\"height\":115,\"fallback\":false}],\"postalCode\":\"10003\",\"timezone\":\"America/New_York\",\"city\":{\"name\":\"New York\"},\"state\":{\"name\":\"New York\",\"stateCode\":\"NY\"},\"country\":{\"name\":\"United States Of America\",\"countryCode\":\"US\"},\"address\":{\"line1\":\"126 Second Ave.\"},\"location\":{\"longitude\":\"-73.987498\",\"latitude\":\"40.728188\"},\"markets\":[{\"name\":\"New York/Tri-State Area\",\"id\":\"35\"},{\"name\":\"Northern New Jersey\",\"id\":\"55\"},{\"name\":\"Connecticut\",\"id\":\"124\"}],\"dmas\":[{\"id\":296},{\"id\":345},{\"id\":422}],\"boxOfficeInfo\":{\"phoneNumberDetail\":\"The Box Office is open for sales by a walk in service only!\",\"openHoursDetail\":\"Monday: 1:00pm - 6:00pm Tue - Fri: 1:00pm - 8:00pm Saturday: 12:00pm - 8:00pm Sun: 1:00pm - 12(Noon) - 7:00pm\",\"acceptedPaymentDetail\":\"CashAmExVisaMC\",\"willCallDetail\":\"Pick up tickets one hour prior to the show. Customer must present the actual credit card used to place the order and a photo ID.\"},\"parkingDetail\":\"There is a garage located on 9th Street between 2nd & 3rd Avenue. All on-street parking is metered until after 2:00am.\",\"accessibleSeatingDetail\":\"All seats require stepping up stairs. The theatre is not equipped with elevators or escalators. Call the Box Office for more information. Orchestra Balcony (Balcony Row AA overhangs Orchestra Row J)\",\"generalInfo\":{\"generalRule\":\"NO smoking in the theatre NO food allowed in the theatre NO cameras, video cameras, or audio recording devices allowed **Latecomers will be seated at an appropriate time during the show at the theatres discretion**\",\"childRule\":\"Children must be at least 4 years old to attend STOMP. Everyone must have a ticket.\"},\"upcomingEvents\":{\"_total\":394,\"ticketmaster\":394},\"_links\":{\"self\":{\"href\":\"/discovery/v2/venues/KovZpZAF7etA?locale=en-us\"}}}],\"attractions\":[{\"name\":\"STOMP (NY)\",\"type\":\"attraction\",\"id\":\"K8vZ9171pQ0\",\"test\":false,\"url\":\"https://www.ticketmaster.com/stomp-ny-tickets/artist/844123\",\"locale\":\"en-us\",\"images\":[{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_16_9.jpg\",\"width\":1024,\"height\":576,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_LARGE_16_9.jpg\",\"width\":2048,\"height\":1152,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_LANDSCAPE_16_9.jpg\",\"width\":1136,\"height\":639,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_ARTIST_PAGE_3_2.jpg\",\"width\":305,\"height\":203,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_3_2.jpg\",\"width\":1024,\"height\":683,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_EVENT_DETAIL_PAGE_16_9.jpg\",\"width\":205,\"height\":115,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RECOMENDATION_16_9.jpg\",\"width\":100,\"height\":56,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_PORTRAIT_16_9.jpg\",\"width\":640,\"height\":360,\"fallback\":false},{\"ratio\":\"4_3\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_CUSTOM.jpg\",\"width\":305,\"height\":225,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_PORTRAIT_3_2.jpg\",\"width\":640,\"height\":427,\"fallback\":false}],\"classifications\":[{\"primary\":true,\"segment\":{\"id\":\"KZFzniwnSyZfZ7v7na\",\"name\":\"Arts & Theatre\"},\"genre\":{\"id\":\"KnvZfZ7v7l1\",\"name\":\"Theatre\"},\"subGenre\":{\"id\":\"KZazBEonSMnZfZ7v7ll\",\"name\":\"Miscellaneous\"},\"type\":{\"id\":\"KZAyXgnZfZ7v7nI\",\"name\":\"Undefined\"},\"subType\":{\"id\":\"KZFzBErXgnZfZ7v7lJ\",\"name\":\"Undefined\"},\"family\":false}],\"upcomingEvents\":{\"_total\":394,\"ticketmaster\":394},\"_links\":{\"self\":{\"href\":\"/discovery/v2/attractions/K8vZ9171pQ0?locale=en-us\"}}}]}}"
        val obj = Gson().fromJson(mockJson, EventDetails::class.java)
        val list = mutableListOf<EventDetails>()
        list.add(obj)
        //When map to a DTO object
        val asDto = list.toEventDto()

        //Then the mapping properties are checked
        asDto.forEach {
            assertThat(it.id, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.name, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.type, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.url, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.locale, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.adult, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.thumbnailImage, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.coverImage, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.startDate, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.info, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.covidInfo, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.classifications, CoreMatchers.not(CoreMatchers.nullValue()))
            assertThat(it.lastSync, CoreMatchers.not(CoreMatchers.nullValue()))
        }
    }

    @Test
    fun shouldMapAsInValidDTO() {
        //Given a an object from server
        val mockJson =
            "{\"name\":\"STOMP (NY)\",\"type\":\"event\",\"test\":false,\"url\":\"https://www.ticketmaster.com/stomp-ny-new-york-new-york-09-24-2021/event/30005AB946D72471\",\"locale\":\"en-us\",\"images\":[{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_16_9.jpg\",\"width\":1024,\"height\":576,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_LARGE_16_9.jpg\",\"width\":2048,\"height\":1152,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_LANDSCAPE_16_9.jpg\",\"width\":1136,\"height\":639,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_ARTIST_PAGE_3_2.jpg\",\"width\":305,\"height\":203,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_3_2.jpg\",\"width\":1024,\"height\":683,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_EVENT_DETAIL_PAGE_16_9.jpg\",\"width\":205,\"height\":115,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RECOMENDATION_16_9.jpg\",\"width\":100,\"height\":56,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_PORTRAIT_16_9.jpg\",\"width\":640,\"height\":360,\"fallback\":false},{\"ratio\":\"4_3\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_CUSTOM.jpg\",\"width\":305,\"height\":225,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_PORTRAIT_3_2.jpg\",\"width\":640,\"height\":427,\"fallback\":false}],\"sales\":{\"public\":{\"startDateTime\":\"2021-06-28T16:00:00Z\",\"startTBD\":false,\"startTBA\":false,\"endDateTime\":\"2021-09-24T23:00:00Z\"}},\"dates\":{\"start\":{\"localDate\":\"2021-09-24\",\"localTime\":\"20:00:00\",\"dateTime\":\"2021-09-25T00:00:00Z\",\"dateTBD\":false,\"dateTBA\":false,\"timeTBA\":false,\"noSpecificTime\":false},\"timezone\":\"America/New_York\",\"status\":{\"code\":\"onsale\"},\"spanMultipleDays\":false},\"classifications\":[{\"primary\":true,\"segment\":{\"id\":\"KZFzniwnSyZfZ7v7na\",\"name\":\"Arts & Theatre\"},\"genre\":{\"id\":\"KnvZfZ7v7l1\",\"name\":\"Theatre\"},\"subGenre\":{\"id\":\"KZazBEonSMnZfZ7v7ll\",\"name\":\"Miscellaneous\"},\"type\":{\"id\":\"KZAyXgnZfZ7v7nI\",\"name\":\"Undefined\"},\"subType\":{\"id\":\"KZFzBErXgnZfZ7v7lJ\",\"name\":\"Undefined\"},\"family\":false}],\"promoter\":{\"id\":\"494\",\"name\":\"PROMOTED BY VENUE\",\"description\":\"PROMOTED BY VENUE / NTL / USA\"},\"promoters\":[{\"id\":\"494\",\"name\":\"PROMOTED BY VENUE\",\"description\":\"PROMOTED BY VENUE / NTL / USA\"}],\"info\":\"If this performance is cancelled or if your tickets need to be cancelled to comply with updated government COVID-19 requirements, you will receive a notification of cancellation and be offered an exchange or a full refund for your purchase. The theater has established COVID-19 health & safety measures (details at: stomponline.com) including, but not limited to, proof of full vaccination (for ages 12+) and wearing masks. By virtue of entering the theater, all ticket holders agree to comply with all venue health & safety measures which are subject to change between now and the performance date. Tickets purchased for this event may be exchanged or refunded subject to the terms and conditions of the theater exchange and refund policy.\",\"pleaseNote\":\"Important Event Info If this performance is cancelled or if your tickets need to be cancelled to comply with updated government COVID-19 requirements, you will receive a notification of cancellation and be offered an exchange or a full refund for your purchase. The theater has established COVID-19 health & safety measures (details at: stomponline.com) including, but not limited to, proof of full vaccination (for ages 12+) and wearing masks. By virtue of entering the theater, all ticket holders agree to comply with all venue health & safety measures which are subject to change between now and the performance date. Tickets purchased for this event may be exchanged or refunded subject to the terms and conditions of the theater exchange and refund policy.\",\"priceRanges\":[{\"type\":\"standard\",\"currency\":\"USD\",\"min\":48,\"max\":88}],\"seatmap\":{\"staticUrl\":\"https://maps.ticketmaster.com/maps/geometry/3/event/30005AB946D72471/staticImage?type=png&systemId=HOST\"},\"accessibility\":{\"ticketLimit\":4},\"ticketLimit\":{\"info\":\"There is a nineteen (19) ticket limit per person.\"},\"ageRestrictions\":{\"legalAgeEnforced\":false},\"_links\":{\"self\":{\"href\":\"/discovery/v2/events/G5dZZplPkgwos?locale=en-us\"},\"attractions\":[{\"href\":\"/discovery/v2/attractions/K8vZ9171pQ0?locale=en-us\"}],\"venues\":[{\"href\":\"/discovery/v2/venues/KovZpZAF7etA?locale=en-us\"}]},\"_embedded\":{\"venues\":[{\"name\":\"Orpheum Theatre\",\"type\":\"venue\",\"id\":\"KovZpZAF7etA\",\"test\":false,\"url\":\"https://www.ticketmaster.com/orpheum-theatre-tickets-new-york/venue/393233\",\"locale\":\"en-us\",\"images\":[{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dbimages/15375v.jpg\",\"width\":205,\"height\":115,\"fallback\":false}],\"postalCode\":\"10003\",\"timezone\":\"America/New_York\",\"city\":{\"name\":\"New York\"},\"state\":{\"name\":\"New York\",\"stateCode\":\"NY\"},\"country\":{\"name\":\"United States Of America\",\"countryCode\":\"US\"},\"address\":{\"line1\":\"126 Second Ave.\"},\"location\":{\"longitude\":\"-73.987498\",\"latitude\":\"40.728188\"},\"markets\":[{\"name\":\"New York/Tri-State Area\",\"id\":\"35\"},{\"name\":\"Northern New Jersey\",\"id\":\"55\"},{\"name\":\"Connecticut\",\"id\":\"124\"}],\"dmas\":[{\"id\":296},{\"id\":345},{\"id\":422}],\"boxOfficeInfo\":{\"phoneNumberDetail\":\"The Box Office is open for sales by a walk in service only!\",\"openHoursDetail\":\"Monday: 1:00pm - 6:00pm Tue - Fri: 1:00pm - 8:00pm Saturday: 12:00pm - 8:00pm Sun: 1:00pm - 12(Noon) - 7:00pm\",\"acceptedPaymentDetail\":\"CashAmExVisaMC\",\"willCallDetail\":\"Pick up tickets one hour prior to the show. Customer must present the actual credit card used to place the order and a photo ID.\"},\"parkingDetail\":\"There is a garage located on 9th Street between 2nd & 3rd Avenue. All on-street parking is metered until after 2:00am.\",\"accessibleSeatingDetail\":\"All seats require stepping up stairs. The theatre is not equipped with elevators or escalators. Call the Box Office for more information. Orchestra Balcony (Balcony Row AA overhangs Orchestra Row J)\",\"generalInfo\":{\"generalRule\":\"NO smoking in the theatre NO food allowed in the theatre NO cameras, video cameras, or audio recording devices allowed **Latecomers will be seated at an appropriate time during the show at the theatres discretion**\",\"childRule\":\"Children must be at least 4 years old to attend STOMP. Everyone must have a ticket.\"},\"upcomingEvents\":{\"_total\":394,\"ticketmaster\":394},\"_links\":{\"self\":{\"href\":\"/discovery/v2/venues/KovZpZAF7etA?locale=en-us\"}}}],\"attractions\":[{\"name\":\"STOMP (NY)\",\"type\":\"attraction\",\"id\":\"K8vZ9171pQ0\",\"test\":false,\"url\":\"https://www.ticketmaster.com/stomp-ny-tickets/artist/844123\",\"locale\":\"en-us\",\"images\":[{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_16_9.jpg\",\"width\":1024,\"height\":576,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_LARGE_16_9.jpg\",\"width\":2048,\"height\":1152,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_LANDSCAPE_16_9.jpg\",\"width\":1136,\"height\":639,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_ARTIST_PAGE_3_2.jpg\",\"width\":305,\"height\":203,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_TABLET_LANDSCAPE_3_2.jpg\",\"width\":1024,\"height\":683,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_EVENT_DETAIL_PAGE_16_9.jpg\",\"width\":205,\"height\":115,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RECOMENDATION_16_9.jpg\",\"width\":100,\"height\":56,\"fallback\":false},{\"ratio\":\"16_9\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_PORTRAIT_16_9.jpg\",\"width\":640,\"height\":360,\"fallback\":false},{\"ratio\":\"4_3\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_CUSTOM.jpg\",\"width\":305,\"height\":225,\"fallback\":false},{\"ratio\":\"3_2\",\"url\":\"https://s1.ticketm.net/dam/a/7e7/8f142f4c-b7df-42cd-963d-12d46b8467e7_224141_RETINA_PORTRAIT_3_2.jpg\",\"width\":640,\"height\":427,\"fallback\":false}],\"classifications\":[{\"primary\":true,\"segment\":{\"id\":\"KZFzniwnSyZfZ7v7na\",\"name\":\"Arts & Theatre\"},\"genre\":{\"id\":\"KnvZfZ7v7l1\",\"name\":\"Theatre\"},\"subGenre\":{\"id\":\"KZazBEonSMnZfZ7v7ll\",\"name\":\"Miscellaneous\"},\"type\":{\"id\":\"KZAyXgnZfZ7v7nI\",\"name\":\"Undefined\"},\"subType\":{\"id\":\"KZFzBErXgnZfZ7v7lJ\",\"name\":\"Undefined\"},\"family\":false}],\"upcomingEvents\":{\"_total\":394,\"ticketmaster\":394},\"_links\":{\"self\":{\"href\":\"/discovery/v2/attractions/K8vZ9171pQ0?locale=en-us\"}}}]}}"
        try {
            val obj = Gson().fromJson(mockJson, EventDetails::class.java)
            val list = mutableListOf<EventDetails>()
            list.add(obj)
            //When map to a DTO object
            val asDto = list.toEventDto()

            //Then the mapping properties are checked
            asDto.forEach {
                assertThat(it.id, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.name, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.type, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.url, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.locale, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.adult, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.thumbnailImage, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.coverImage, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.startDate, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.info, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.covidInfo, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.classifications, CoreMatchers.not(CoreMatchers.nullValue()))
                assertThat(it.lastSync, CoreMatchers.not(CoreMatchers.nullValue()))
            }
            fail("Unexpected result")
        } catch (e: Exception) {
            assertThat(e, instanceOf(NullPointerException::class.java))
        }
    }

    //TODO validate model in domain
}